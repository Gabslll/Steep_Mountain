<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steep Mountain - Análise Inteligente de Trilhas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA;
            color: #212529;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 250px;
            max-height: 40vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .nav-link {
            transition: color 0.3s ease;
            color: #495057;
        }
        .nav-link:hover, .nav-link.active {
            color: #0B5ED7;
        }
        .section-title {
            color: #0B5ED7;
        }
        .btn-primary {
            background-color: #0D6EFD;
            color: white;
            transition: background-color 0.3s ease;
        }
        .btn-primary:hover {
            background-color: #0B5ED7;
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.1);
        }
    </style>
</head>
<body class="antialiased">

    <header id="header" class="bg-white/80 backdrop-blur-lg fixed top-0 left-0 right-0 z-50 shadow-sm">
        <div class="container mx-auto px-6 py-3 flex justify-between items-center">
            <a href="#hero" class="text-2xl font-bold text-[#0B5ED7]">
                <span class="mr-2">&#128507;</span>Steep Mountain
            </a>
            <nav class="hidden md:flex space-x-8">
                <a href="#solucao" class="nav-link font-medium">A Solução</a>
                <a href="#tecnologia" class="nav-link font-medium">Tecnologia</a>
                <a href="#impacto" class="nav-link font-medium">Impacto</a>
                <a href="#futuro" class="nav-link font-medium">Futuro</a>
            </nav>
        </div>
    </header>

    <main>
        <section id="hero" class="min-h-screen flex items-center bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?q=80&w=2070&auto=format&fit=crop');">
            <div class="absolute inset-0 bg-black/50"></div>
            <div class="container mx-auto px-6 text-center relative z-10">
                <h1 class="text-4xl md:text-6xl font-bold text-white mb-4">Análise Inteligente de Trilhas para Aventuras Inesquecíveis</h1>
                <p class="text-lg md:text-xl text-gray-200 max-w-3xl mx-auto mb-8">Maximizando a experiência outdoor com tecnologia, segurança e planejamento eficiente.</p>
                <a href="#desafio" class="btn-primary font-bold py-3 px-8 rounded-full text-lg">Descubra o Projeto</a>
            </div>
        </section>

        <section id="desafio" class="py-20 bg-white">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">O Desafio de Explorar a Natureza</h2>
                <p class="text-lg text-gray-600 max-w-3xl mx-auto mb-12">Planejar uma trilha pode ser complexo e arriscado. A falta de informação confiável gera incerteza e pode transformar uma aventura em um problema. Identificamos os principais desafios enfrentados por entusiastas de atividades ao ar livre.</p>
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <div class="card p-8">
                        <div class="text-4xl mb-4">&#127783;</div>
                        <h3 class="text-xl font-bold mb-2">Clima Incerto</h3>
                        <p class="text-gray-600">Mudanças climáticas repentinas podem pegar trilheiros desprevenidos, aumentando os riscos.</p>
                    </div>
                    <div class="card p-8">
                        <div class="text-4xl mb-4">&#128736;</div>
                        <h3 class="text-xl font-bold mb-2">Dificuldade Real</h3>
                        <p class="text-gray-600">Avaliações de dificuldade subjetivas podem levar a escolhas de rotas inadequadas para o nível de preparo.</p>
                    </div>
                    <div class="card p-8">
                        <div class="text-4xl mb-4">&#128269;</div>
                        <h3 class="text-xl font-bold mb-2">Perigo de se Perder</h3>
                        <p class="text-gray-600">Trilhas mal sinalizadas ou a falta de pontos de referência claros são uma causa comum de incidentes.</p>
                    </div>
                    <div class="card p-8">
                        <div class="text-4xl mb-4">&#128167;</div>
                        <h3 class="text-xl font-bold mb-2">Falta de Recursos</h3>
                        <p class="text-gray-600">A incerteza sobre pontos de água, abrigos ou áreas de resgate dificulta o planejamento logístico.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="solucao" class="py-20">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="section-title text-3xl md:text-4xl font-bold mb-4">A Solução Inteligente: Steep Mountain</h2>
                    <p class="text-lg text-gray-600 max-w-4xl mx-auto">Para resolver estes desafios, o Steep Mountain oferece uma plataforma de análise visual e interativa. Veja abaixo uma simulação de como nosso sistema analisa uma rota, combinando dados de elevação, distância e pontos de interesse para lhe dar uma visão completa e segura do seu percurso.</p>
                </div>

                <div class="card p-6 md:p-8">
                    <div class="flex flex-col lg:flex-row gap-8">
                        <div class="flex-1">
                            <h3 class="text-2xl font-bold mb-4">Análise de Rota Interativa</h3>
                            <div class="mb-4">
                                <label for="route-selector" class="font-medium">Selecione uma rota para análise:</label>
                                <select id="route-selector" class="mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                                    <option value="facil">Trilha do Pinheiro (Fácil)</option>
                                    <option value="dificil">Travessia da Neblina (Difícil)</option>
                                </select>
                            </div>
                            <div class="grid grid-cols-2 gap-4 text-center">
                                <div class="bg-blue-100 p-4 rounded-lg">
                                    <p class="text-sm text-blue-800 font-medium">Distância</p>
                                    <p id="route-distance" class="text-2xl font-bold text-blue-900">12 km</p>
                                </div>
                                <div class="bg-green-100 p-4 rounded-lg">
                                    <p class="text-sm text-green-800 font-medium">Tempo Estimado</p>
                                    <p id="route-time" class="text-2xl font-bold text-green-900">4h 30m</p>
                                </div>
                                <div class="bg-purple-100 p-4 rounded-lg">
                                    <p class="text-sm text-purple-800 font-medium">Elevação Máx.</p>
                                    <p id="route-elevation" class="text-2xl font-bold text-purple-900">450 m</p>
                                </div>
                                <div class="bg-yellow-100 p-4 rounded-lg">
                                    <p class="text-sm text-yellow-800 font-medium">Dificuldade</p>
                                    <p id="route-difficulty" class="text-2xl font-bold text-yellow-900">Fácil</p>
                                </div>
                            </div>
                             <div class="mt-6">
                                <h4 class="font-bold text-lg mb-2">Alertas e Pontos Críticos:</h4>
                                <ul id="route-alerts" class="list-none space-y-2">
                                    <li class="flex items-center"><span class="text-green-500 mr-2">&#10003;</span> Terreno com boa sinalização</li>
                                    <li class="flex items-center"><span class="text-green-500 mr-2">&#10003;</span> Ponto de água potável no km 5</li>
                                </ul>
                            </div>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-2xl font-bold mb-4 text-center lg:text-left">Perfil de Elevação</h3>
                            <div class="chart-container">
                                <canvas id="elevationChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="tecnologia" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                 <div class="text-center mb-12">
                    <h2 class="section-title text-3xl md:text-4xl font-bold mb-4">Arquitetura e Tecnologia</h2>
                    <p class="text-lg text-gray-600 max-w-4xl mx-auto">Para entregar uma experiência robusta e escalável, nossa solução é construída sobre uma arquitetura moderna. Cada componente é projetado para máxima eficiência e confiabilidade. Clique nos blocos para saber mais.</p>
                </div>
                <div id="tech-architecture" class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                     <div class="tech-block card p-6 cursor-pointer" data-tech="frontend">
                        <h3 class="text-xl font-bold">Frontend</h3>
                        <p class="text-gray-500">Web & Mobile</p>
                    </div>
                     <div class="flex items-center justify-center text-2xl font-bold text-gray-400">&rarr;</div>
                     <div class="tech-block card p-6 cursor-pointer" data-tech="backend">
                        <h3 class="text-xl font-bold">Backend</h3>
                        <p class="text-gray-500">API & Algoritmos</p>
                    </div>
                </div>
                 <div id="tech-details" class="mt-8 p-6 bg-gray-100 rounded-lg text-center min-h-[100px] flex items-center justify-center">
                    <p class="text-gray-700">Selecione um componente da arquitetura para ver os detalhes.</p>
                </div>
            </div>
        </section>


        <section id="impacto" class="py-20">
            <div class="container mx-auto px-6">
                 <div class="text-center mb-12">
                    <h2 class="section-title text-3xl md:text-4xl font-bold mb-4">Impacto e Oportunidades de Negócio</h2>
                    <p class="text-lg text-gray-600 max-w-4xl mx-auto">O Steep Mountain não apenas aumenta a segurança dos usuários, mas também abre um leque de oportunidades comerciais em um mercado em plena expansão. Nosso impacto se estende a diferentes públicos, criando um ecossistema de valor.</p>
                </div>

                <div class="grid lg:grid-cols-2 gap-12 items-center">
                    <div>
                        <h3 class="text-2xl font-bold mb-4 text-center">Público-Alvo Potencial</h3>
                         <div class="chart-container" style="max-width: 600px; height: 300px;">
                            <canvas id="audienceChart"></canvas>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-2xl font-bold mb-4 text-center">Modelos de Negócio</h3>
                        <div class="space-y-6">
                            <div class="card p-6 flex items-start gap-4">
                                <div class="text-3xl text-blue-600">&#128179;</div>
                                <div>
                                    <h4 class="font-bold text-lg">Assinatura Freemium/Premium</h4>
                                    <p class="text-gray-600">Acesso a funcionalidades avançadas como mapas offline, análises detalhadas e alertas proativos.</p>
                                </div>
                            </div>
                             <div class="card p-6 flex items-start gap-4">
                                <div class="text-3xl text-blue-600">&#129309;</div>
                                <div>
                                    <h4 class="font-bold text-lg">Parcerias Estratégicas</h4>
                                    <p class="text-gray-600">Colaboração com agências de turismo, lojas de equipamentos e seguradoras para oferecer pacotes de valor.</p>
                                </div>
                            </div>
                             <div class="card p-6 flex items-start gap-4">
                                <div class="text-3xl text-blue-600">&#128202;</div>
                                <div>
                                    <h4 class="font-bold text-lg">Análise de Dados Agregados</h4>
                                    <p class="text-gray-600">Fornecimento de insights (anonimizados) sobre fluxo de trilhas para gestão de parques e pesquisas de mercado.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

         <section id="futuro" class="py-20 bg-white">
            <div class="container mx-auto px-6 text-center">
                <h2 class="section-title text-3xl md:text-4xl font-bold mb-4">O Futuro é Colaborativo e Inteligente</h2>
                <p class="text-lg text-gray-600 max-w-3xl mx-auto mb-12">Estamos apenas no começo da jornada. Acreditamos que a evolução contínua é a chave para o sucesso e para mantermos nossa promessa de segurança e inovação. Nossos próximos passos são focados em expandir o poder da nossa plataforma.</p>
                <div class="flex flex-col md:flex-row justify-center gap-8">
                     <div class="card p-8 flex-1">
                        <div class="text-4xl mb-4">&#128101;</div>
                        <h3 class="text-xl font-bold mb-2">Comunidade Integrada</h3>
                        <p class="text-gray-600">Implementar um sistema de feedback em tempo real onde a comunidade pode reportar condições da trilha, enriquecendo os dados para todos.</p>
                    </div>
                     <div class="card p-8 flex-1">
                        <div class="text-4xl mb-4">&#127758;</div>
                        <h3 class="text-xl font-bold mb-2">Expansão Global</h3>
                        <p class="text-gray-600">Aumentar nossa base de dados de trilhas para cobrir novas regiões e continentes, tornando o Steep Mountain uma ferramenta global.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="planner" class="py-16 bg-slate-100">
            <div class="container mx-auto px-6 lg:px-8">
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-bold tracking-tight text-gray-900 sm:text-5xl">Planeador de Trilha Interativo</h2>
                    <p class="mt-4 text-xl text-gray-600">
                        Modele sua próxima aventura! Insira os dados da trilha ou use nossos exemplos para estimar o percurso e o esforço.
                    </p>
                </div>

                <div class="grid lg:grid-cols-5 gap-8 items-start">
                    <div class="lg:col-span-2 bg-white p-6 sm:p-8 rounded-xl shadow-xl">
                        <h3 class="text-2xl font-semibold mb-6 text-gray-800">Configure sua Trilha</h3>
                        <div class="space-y-6">
                            <div>
                                <label for="trail-select" class="block text-sm font-medium text-gray-700 mb-1">Selecione uma Trilha de Exemplo:</label>
                                <select id="trail-select" class="mt-1 block w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-base">
                                    <option value="custom">Trilha Personalizada</option>
                                    <option value="fuji">Monte Fuji (Yoshida Trail), Japão</option>
                                    <option value="arthurs-seat">Arthur's Seat, Escócia</option>
                                    <option value="mount-marathon">Mount Marathon Race Path, Alasca (Subida)</option>
                                </select>
                            </div>

                            <div id="custom-trail-inputs" class="space-y-5 pt-3">
                                <div>
                                    <label for="trail-name" class="block text-sm font-medium text-gray-700 mb-1">Nome da Trilha (Opcional):</label>
                                    <input type="text" id="trail-name" class="mt-1 block w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-base" placeholder="Minha Trilha Incrível">
                                </div>
                                <div>
                                    <label for="horizontal-distance" class="block text-sm font-medium text-gray-700 mb-1">Distância Horizontal Total (metros):</label>
                                    <input type="number" id="horizontal-distance" placeholder="Ex: 6000" class="mt-1 block w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-base">
                                </div>
                                <div>
                                    <label for="elevation-gain" class="block text-sm font-medium text-gray-700 mb-1">Ganho de Elevação Total (metros):</label>
                                    <input type="number" id="elevation-gain" placeholder="Ex: 1476" class="mt-1 block w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-base">
                                </div>
                                <div>
                                    <label for="initial-altitude" class="block text-sm font-medium text-gray-700 mb-1">Altitude Inicial da Base (metros):</label>
                                    <input type="number" id="initial-altitude" value="0" class="mt-1 block w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-base" placeholder="Ex: 2300 (para perfil)">
                                </div>
                            </div>
                            <button id="calculate-button" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-4 rounded-md shadow-md hover:shadow-lg transition duration-150 ease-in-out text-lg">
                                Analisar Trilha
                            </button>
                        </div>
                    </div>

                    <div class="lg:col-span-3">
                        <div id="results-area" class="bg-white p-6 sm:p-8 rounded-xl shadow-xl mb-8 hidden">
                            <h3 class="text-2xl font-semibold mb-2 text-gray-800">Análise da Trilha: <span id="result-trail-name" class="text-indigo-600"></span></h3>
                            <p class="text-gray-600 text-base mb-1"><strong>Coeficiente A (para g(x) = Ax^(3/2)):</strong> <span id="result-coeff-a" class="font-mono text-gray-800"></span></p>
                            <p class="text-gray-600 text-base mb-1"><strong>Comprimento Real Estimado:</strong> <span id="result-arc-length" class="font-mono text-gray-800"></span> metros</p>
                            <p class="text-gray-600 text-base"><strong>Índice de Esforço Acumulado (IE):</strong> <span id="result-effort-index" class="font-mono text-gray-800"></span></p>
                            <p class="mt-3 text-sm text-gray-500">Lembrete: O Índice de Esforço é uma medida comparativa. Valores mais altos geralmente indicam trilhas mais exigentes segundo este modelo (g(x)=Ax^(3/2), IE = ∫(g'(x))²dx).</p>
                        </div>

                        <div class="bg-white p-6 sm:p-8 rounded-xl shadow-xl">
                            <h3 class="text-2xl font-semibold mb-6 text-gray-800">Perfil Estimado da Trilha</h3>
                            <div class="chart-container relative mx-auto" style="height:350px; width:100%;">
                                <canvas id="trailProfileChart"></canvas>
                            </div>
                            <p id="chart-helper-text" class="text-sm text-gray-500 mt-4 text-center">Insira os dados e clique em "Analisar Trilha" para visualizar o perfil de elevação.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-800 text-white py-10">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2024 Steep Mountain. Todos os direitos reservados.</p>
            <p class="text-sm text-gray-400 mt-2">Um projeto de demonstração para a Engenharia de Software Comercial.</p>
        </div>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', () => {

    const routeData = {
        facil: {
            distance: '8 km',
            time: '2h 30m',
            elevation: '450 m',
            difficulty: 'Fácil',
            alerts: [
                { text: 'Terreno com boa sinalização', type: 'success' },
                { text: 'Ponto de água potável no km 5', type: 'success' },
            ],
            elevationData: {
                labels: ['0km', '1km', '2km', '3km', '4km', '5km', '6km', '7km', '8km'],
                data: [150, 200, 220, 300, 310, 450, 400, 350, 300]
            }
        },
        dificil: {
            distance: '18 km',
            time: '7h 15m',
            elevation: '1250 m',
            difficulty: 'Difícil',
            alerts: [
                { text: 'Trecho com risco de deslizamento', type: 'danger' },
                { text: 'Sinalização precária após o km 10', type: 'warning' },
                { text: 'Levar no mínimo 3L de água', type: 'info' }
            ],
            elevationData: {
                labels: ['0km', '2km', '4km', '6km', '8km', '10km', '12km', '14km', '16km', '18km'],
                data: [200, 400, 550, 800, 950, 1250, 1100, 900, 750, 600]
            }
        }
    };

    const techDetailsData = {
        frontend: "Desenvolvemos interfaces intuitivas para web e mobile, permitindo que o usuário visualize mapas interativos, configure percursos e acesse as análises de forma clara e objetiva.",
        backend: "O cérebro do sistema, responsável por processar dados geográficos, aplicar algoritmos de análise de rota (considerando inclinação, terreno e dados históricos) e integrar com serviços externos como APIs de mapas e previsão do tempo.",
    };

    const routeSelector = document.getElementById('route-selector');
    const elevationChartCtx = document.getElementById('elevationChart').getContext('2d');
    const audienceChartCtx = document.getElementById('audienceChart').getContext('2d');
    let elevationChart;
    let audienceChart;

    function updateRouteInfo(routeKey) {
        const data = routeData[routeKey];
        document.getElementById('route-distance').textContent = data.distance;
        document.getElementById('route-time').textContent = data.time;
        document.getElementById('route-elevation').textContent = data.elevation;
        document.getElementById('route-difficulty').textContent = data.difficulty;
        
        const alertsList = document.getElementById('route-alerts');
        alertsList.innerHTML = '';
        data.alerts.forEach(alert => {
            const li = document.createElement('li');
            li.className = 'flex items-center';
            let iconColor = 'text-gray-500';
            let icon = '&#128167'; 
            if (alert.type === 'success') { iconColor = 'text-green-500'; icon = '&#10003;'; }
            if (alert.type === 'warning') { iconColor = 'text-yellow-500'; icon = '&#9888;'; }
            if (alert.type === 'danger') { iconColor = 'text-red-500'; icon = '&#9940;'; }
            li.innerHTML = `<span class="${iconColor} mr-2 font-bold text-xl">${icon}</span> ${alert.text}`;
            alertsList.appendChild(li);
        });

        updateElevationChart(data.elevationData);
    }

    function updateElevationChart(data) {
        if (elevationChart) {
            elevationChart.destroy();
        }
        elevationChart = new Chart(elevationChartCtx, {
            type: 'line',
            data: {
                labels: data.labels,
                datasets: [{
                    label: 'Elevação (m)',
                    data: data.data,
                    backgroundColor: 'rgba(13, 110, 253, 0.1)',
                    borderColor: 'rgba(13, 110, 253, 1)',
                    borderWidth: 2,
                    fill: true,
                    tension: 0.3,
                    pointBackgroundColor: 'rgba(13, 110, 253, 1)'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: false,
                        title: {
                            display: true,
                            text: 'Altitude (m)'
                        }
                    },
                    x: {
                         title: {
                            display: true,
                            text: 'Distância'
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                    }
                },
                hover: {
                    mode: 'nearest',
                    intersect: true
                }
            }
        });
    }
    
    routeSelector.addEventListener('change', (e) => {
        updateRouteInfo(e.target.value);
    });
    
    updateRouteInfo('facil');

    audienceChart = new Chart(audienceChartCtx, {
        type: 'bar',
        data: {
            labels: ['Trilheiros Individuais', 'Grupos de Trekking', 'Guias Profissionais', 'Agências de Turismo'],
            datasets: [{
                label: 'Potencial de Mercado (Estimado)',
                data: [65, 50, 30, 25],
                backgroundColor: [
                    'rgba(13, 110, 253, 0.7)',
                    'rgba(25, 135, 84, 0.7)',
                    'rgba(255, 193, 7, 0.7)',
                    'rgba(108, 117, 125, 0.7)'
                ],
                borderColor: [
                    'rgba(13, 110, 253, 1)',
                    'rgba(25, 135, 84, 1)',
                    'rgba(255, 193, 7, 1)',
                    'rgba(108, 117, 125, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
             indexAxis: 'y',
             responsive: true,
             maintainAspectRatio: false,
             plugins: {
                legend: {
                    display: false
                }
            },
            scales: {
                x: {
                    title: {
                        display: true,
                        text: 'Índice de Potencial'
                    }
                }
            }
        }
    });

    const techBlocks = document.querySelectorAll('.tech-block');
    const techDetails = document.getElementById('tech-details');
    techBlocks.forEach(block => {
        block.addEventListener('click', () => {
            const techKey = block.getAttribute('data-tech');
            techDetails.innerHTML = `<p class="text-gray-800 leading-relaxed">${techDetailsData[techKey]}</p>`;
            
            techBlocks.forEach(b => b.classList.remove('ring-2', 'ring-blue-500'));
            block.classList.add('ring-2', 'ring-blue-500');
        });
    });

    const navLinks = document.querySelectorAll('nav a');
    const sections = document.querySelectorAll('main section');
    window.addEventListener('scroll', () => {
        let current = '';
        sections.forEach(section => {
            const sectionTop = section.offsetTop;
            if (pageYOffset >= sectionTop - 60) {
                current = section.getAttribute('id');
            }
        });

        navLinks.forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href').substring(1) === current) {
                link.classList.add('active');
            }
        });
    });
});

// ... (script existente do seu Chart.js para "Potencial de Mercado" e outros) ...
const trailSelect = document.getElementById('trail-select');
const customTrailInputsDiv = document.getElementById('custom-trail-inputs');
const trailNameInput = document.getElementById('trail-name');
const horizontalDistanceInput = document.getElementById('horizontal-distance');
const elevationGainInput = document.getElementById('elevation-gain');
const initialAltitudeInput = document.getElementById('initial-altitude');
const calculateButton = document.getElementById('calculate-button');

const resultsAreaDiv = document.getElementById('results-area');
const resultTrailNameSpan = document.getElementById('result-trail-name');
const resultCoeffASpan = document.getElementById('result-coeff-a');
const resultArcLengthSpan = document.getElementById('result-arc-length');
const resultEffortIndexSpan = document.getElementById('result-effort-index');

const chartHelperText = document.getElementById('chart-helper-text');
const trailProfileChartCanvas = document.getElementById('trailProfileChart');
let trailProfileChart = null; // Variável para guardar a instância do gráfico

const exampleTrails = {
    "fuji": { name: "Monte Fuji (Yoshida Trail)", X: 6000, Y: 1476, Z_initial: 2300 },
    "arthurs-seat": { name: "Arthur's Seat", X: 2000, Y: 200, Z_initial: 50 },
    "mount-marathon": { name: "Mount Marathon Race Path (Subida)", X: 1500, Y: 920, Z_initial: 10 }
};

function populateInputs(trailKey) {
    if (trailKey === "custom") {
        customTrailInputsDiv.style.display = 'block';
        trailNameInput.value = "";
        horizontalDistanceInput.value = "";
        elevationGainInput.value = "";
        initialAltitudeInput.value = "0";
    } else {
        const trailData = exampleTrails[trailKey];
        customTrailInputsDiv.style.display = 'none'; // Ou preencher e desabilitar
        trailNameInput.value = trailData.name;
        horizontalDistanceInput.value = trailData.X;
        elevationGainInput.value = trailData.Y;
        initialAltitudeInput.value = trailData.Z_initial;
    }
}

trailSelect.addEventListener('change', (event) => {
    populateInputs(event.target.value);
    // Limpar resultados e gráfico se mudar a seleção para custom ou se não houver cálculo automático
    resultsAreaDiv.classList.add('hidden');
    if (trailProfileChart) {
        trailProfileChart.destroy();
        trailProfileChart = null;
    }
    chartHelperText.textContent = 'Insira os dados e clique em "Analisar Trilha" para visualizar o perfil de elevação.';
    trailProfileChartCanvas.style.display = 'none';
});

calculateButton.addEventListener('click', () => {
    const X_total = parseFloat(horizontalDistanceInput.value);
    const Y_total = parseFloat(elevationGainInput.value);
    const Z_initial = parseFloat(initialAltitudeInput.value) || 0;
    const name = trailNameInput.value || "Trilha Analisada";

    if (isNaN(X_total) || X_total <= 0 || isNaN(Y_total) || Y_total < 0) {
        alert("Por favor, insira valores válidos para Distância Horizontal (>0) e Ganho de Elevação (>=0).");
        return;
    }

    // Coeficiente A para g(x) = Ax^(3/2)
    // A = Y_total / (X_total^(3/2))
    const A_coeff = Y_total / Math.pow(X_total, 1.5);

    // Comprimento de Arco (L)
    // L = ∫[0, X_total] sqrt(1 + (g'(x))^2) dx , com g'(x) = (3/2)Ax^(1/2) => (g'(x))^2 = (9/4)A^2x
    // u = 1 + (9/4)A^2*x  => du = (9/4)A^2 dx => dx = (4/(9A^2))du
    // ∫ u^(1/2) * (4/(9A^2)) du = (4/(9A^2)) * (2/3)u^(3/2) = (8/(27A^2))u^(3/2)
    // Limites para u: x=0 => u1 = 1; x=X_total => u2 = 1 + (9/4)A^2*X_total
    let arcLength;
    if (A_coeff === 0) { // Trilha plana
        arcLength = X_total;
    } else {
        const term_inside_pow = 1 + (9 / 4) * Math.pow(A_coeff, 2) * X_total;
        arcLength = (8 / (27 * Math.pow(A_coeff, 2))) * (Math.pow(term_inside_pow, 1.5) - 1);
    }
    

    // Índice de Esforço (IE)
    // IE = ∫[0, X_total] (g'(x))^2 dx = ∫ (9/4)A^2*x dx = (9/4)A^2 * [x^2/2]
    // IE = (9/8)A^2 * X_total^2
    // Ou, substituindo A = Y_total / X_total^(1.5):
    // IE = (9/8) * (Y_total^2 / X_total^3) * X_total^2 = (9/8) * (Y_total^2 / X_total)
    let effortIndex;
    if (X_total === 0) { // Evitar divisão por zero, embora já validado X_total > 0
        effortIndex = 0;
    } else {
        effortIndex = (9 / 8) * (Math.pow(Y_total, 2) / X_total);
    }


    // Exibir Resultados
    resultTrailNameSpan.textContent = name;
    resultCoeffASpan.textContent = A_coeff.toExponential(5); // Notação científica para A
    resultArcLengthSpan.textContent = arcLength.toFixed(2);
    resultEffortIndexSpan.textContent = effortIndex.toFixed(2);
    resultsAreaDiv.classList.remove('hidden');

    // Atualizar Gráfico
    updateTrailProfileChart(A_coeff, X_total, Z_initial, name);
    chartHelperText.textContent = `Perfil de elevação estimado para ${name}.`;
    trailProfileChartCanvas.style.display = 'block';
});

function updateTrailProfileChart(A_coeff, X_total, Z_initial, trailName) {
    const dataPoints = [];
    const numberOfPoints = 50; // Número de pontos para o gráfico
    for (let i = 0; i <= numberOfPoints; i++) {
        const x = (X_total / numberOfPoints) * i;
        const y_gain = A_coeff * Math.pow(x, 1.5);
        dataPoints.push({ x: x, y: Z_initial + y_gain });
    }

    if (trailProfileChart) {
        trailProfileChart.destroy(); // Destruir gráfico anterior para evitar sobreposição
    }

    const ctx = trailProfileChartCanvas.getContext('2d');
    trailProfileChart = new Chart(ctx, {
        type: 'line',
        data: {
            datasets: [{
                label: `Perfil de Elevação - ${trailName}`,
                data: dataPoints,
                borderColor: 'rgb(79, 70, 229)', // Indigo
                backgroundColor: 'rgba(79, 70, 229, 0.1)',
                tension: 0.1, // Linha levemente curvada
                fill: true
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                x: {
                    type: 'linear',
                    position: 'bottom',
                    title: {
                        display: true,
                        text: 'Distância Horizontal (metros)'
                    }
                },
                y: {
                    title: {
                        display: true,
                        text: 'Altitude (metros)'
                    },
                    beginAtZero: false // Pode começar de uma altitude base
                }
            },
            plugins: {
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            let label = context.dataset.label || '';
                            if (label) {
                                label += ': ';
                            }
                            if (context.parsed.y !== null) {
                                label += `${context.parsed.y.toFixed(0)}m de altitude a ${context.parsed.x.toFixed(0)}m horizontais`;
                            }
                            return label;
                        }
                    }
                }
            }
        }
    });
}

// Inicializar estado dos inputs
populateInputs(trailSelect.value);
trailProfileChartCanvas.style.display = 'none'; // Esconder canvas inicialmente

</script>
</body>
</html>
